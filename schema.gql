# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type Recording {
  id: String!
  value: Float!
  createdAt: DateTime!
  updatedAt: DateTime!
  note: String!
  quest: Quest!
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

type QuestStatusHistory {
  id: String!
  date: DateTime!
  from: QuestStatus!
  to: QuestStatus!
  remark: String!
}

enum QuestStatus {
  NOT_STARTED
  ONGOING
  COMPLETED
  BLOCKED
}

type Quest {
  id: String!
  name: String!
  description: String!
  status: QuestStatus!
  target: Float!
  unit: String!
  dueDate: DateTime
  startDate: DateTime!
  createdAt: DateTime!
  updatedAt: DateTime!
  parent: Quest
  children: [Quest!]
  repeat: Repeat
  statusHistory: [QuestStatusHistory!]!
  recordings(filter: RecordFilter!): [Recording!]!
}

input RecordFilter {
  start: DateTime
  end: DateTime
  sortedBy: String
}

type Repeat {
  type: RepeatType!
  interval: Int!
  dates: [Int!]!
}

enum RepeatType {
  DAILY
  WEEKLY
  MONTHLY
}

type Query {
  quests: [Quest!]!
  quest(id: String!): Quest!
}

type Mutation {
  createQuest(createQuestDto: CreateQuestDto!): Quest!
  updateQuest(updateQuestDto: UpdateQuestDto!): Quest!
  removeQuest(id: String!): Quest!
  updateQuestStatusHistory(historyId: String!, remark: String!): QuestStatusHistory!
  updateRecord(updateRecordingDto: UpdateRecordingDto!): Recording!
  addRecord(recording: CreateRecordingDto!): Recording!
}

input CreateQuestDto {
  name: String!
  target: Float!
  description: String!
  unit: String!
  startedAt: DateTime
  completedAt: DateTime
  dueDate: DateTime
  repeat: CreateRepeatDto
}

input CreateRepeatDto {
  type: RepeatType! = DAILY
  interval: Int! = 1
  dates: [Int!] = []
}

input UpdateQuestDto {
  name: String
  target: Float
  description: String
  unit: String
  startedAt: DateTime
  completedAt: DateTime
  dueDate: DateTime
  repeat: CreateRepeatDto
  id: String!
  markCompleted: Boolean
  parentId: String
  status: QuestStatus
  statusRemark: String
}

input UpdateRecordingDto {
  value: Float!
  note: String
  id: String!
}

input CreateRecordingDto {
  questId: String!
  value: Float!
  note: String
}